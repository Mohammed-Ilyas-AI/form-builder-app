<div class="h-full bg-gray-100 p-4">
  <!-- Selected Group Section -->
  <div *ngIf="selectedGroup; else noFieldGroupsFallback" class="bg-white p-4 rounded-lg shadow-md mb-6">
    <!-- Group Header -->
    <div class="flex justify-between items-center mb-4">
      <!-- Editable Name -->
      <div *ngIf="!editMode">
        <h2 class="font-bold text-2xl">{{ selectedGroup.name }}</h2>
      </div>
      <div *ngIf="editMode">
        <input [(ngModel)]="selectedGroup.name" type="text"
          class="font-bold text-2xl border border-gray-300 p-2 rounded-lg w-full" />
      </div>

      <!-- Action Buttons -->
      <div class="flex space-x-4">
        <button (click)="toggleEditMode()" title="Edit" class="text-gray-500 hover:text-blue-500">âœï¸</button>
        <button (click)="copyFieldGroup()" title="Copy" class="text-gray-500 hover:text-green-500">ğŸ“‹</button>
        <button (click)="deleteFieldGroup()" title="Delete" class="text-gray-500 hover:text-red-500">ğŸ—‘ï¸</button>
      </div>
    </div>

    <!-- Editable Description -->
    <div *ngIf="editMode; else displayDescription">
      <textarea [(ngModel)]="selectedGroup.description" class="border border-gray-300 p-2 rounded-lg w-full"
        rows="3"></textarea>
      <button class="mt-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600" (click)="saveEdit()">
        Save
      </button>
    </div>

    <!-- Description Display -->
    <ng-template #displayDescription>
      <p class="text-gray-600 mb-4">{{ selectedGroup.description }}</p>
    </ng-template>
  </div>

  <!-- Copied Field Groups Section -->
  <h3 *ngIf="pastedFieldGroups.length > 0" class="font-bold text-lg mb-2">Copied Field Groups</h3>
  <div *ngFor="let group of pastedFieldGroups" class="bg-white p-4 rounded-lg shadow-md mb-4">
    <!-- Copied Group Header -->
    <div class="flex justify-between items-center mb-4">
      <!-- Editable Name -->
      <div *ngIf="!group.editMode">
        <h2 class="font-bold text-lg">{{ group.name }}</h2>
      </div>
      <div *ngIf="group.editMode">
        <input [(ngModel)]="group.name" type="text"
          class="font-bold text-lg border border-gray-300 p-2 rounded-lg w-full" />
      </div>

      <!-- Action Buttons -->
      <div class="flex space-x-4">
        <button (click)="toggleEditCopiedGroup(group)" class="text-gray-500 hover:text-blue-500" title="Edit">
          âœï¸
        </button>
        <button (click)="deleteCopiedGroup(group)" class="text-gray-500 hover:text-red-500" title="Delete">
          ğŸ—‘ï¸
        </button>
      </div>
    </div>

    <!-- Editable Description -->
    <div *ngIf="group.editMode; else displayGroupDescription">
      <textarea [(ngModel)]="group.description" class="border border-gray-300 p-2 rounded-lg w-full"
        rows="3"></textarea>
      <button class="mt-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"
        (click)="saveCopiedEdit(group)">
        Save
      </button>
    </div>

    <!-- Group Description -->
    <ng-template #displayGroupDescription>
      <p class="text-gray-600">{{ group.description }}</p>
    </ng-template>
  </div>

  <!-- Combined Fallback Message -->
  <ng-template #noFieldGroupsFallback>
    <div class="text-gray-500 text-center">
      <p *ngIf="pastedFieldGroups.length === 0">No field groups available. Create or copy a group to get started.</p>
      <p *ngIf="!selectedGroup && pastedFieldGroups.length > 0">Please select a field group to view or edit it.</p>
    </div>
  </ng-template>
</div>
